# ðŸŒ å¤–ç½‘éƒ¨ç½²æ–¹æ¡ˆ - è®©æ‰€æœ‰äººéƒ½èƒ½è®¿é—®

## ðŸŽ¯ ç›®æ ‡
å®žçŽ°24/7åœ¨çº¿è®¿é—®ï¼Œå¤–ç½‘ç”¨æˆ·å¯ä»¥ç›´æŽ¥é€šè¿‡ç½‘é¡µé“¾æŽ¥ä½¿ç”¨ç³»ç»Ÿï¼Œæ— éœ€æ‚¨æœ¬åœ°å¯åŠ¨ã€‚

## ðŸ“‹ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æˆæœ¬ | æŽ¨èåº¦ |
|------|------|------|------|--------|
| å†…ç½‘ç©¿é€ | å¿«é€Ÿç®€å• | éœ€è¦æœ¬åœ°è¿è¡Œ | å…è´¹/ä½Žæˆæœ¬ | â­â­â­ |
| äº‘æœåŠ¡å™¨ | ç¨³å®šå¯é  | éœ€è¦é…ç½® | ä¸­ç­‰ | â­â­â­â­â­ |
| å…è´¹äº‘å¹³å° | å®Œå…¨å…è´¹ | æœ‰é™åˆ¶ | å…è´¹ | â­â­â­â­ |

---

## ðŸš€ æ–¹æ¡ˆä¸€ï¼šå†…ç½‘ç©¿é€ï¼ˆæœ€å¿«é€Ÿï¼‰

### ä½¿ç”¨ ngrokï¼ˆæŽ¨èï¼‰

1. **ä¸‹è½½å®‰è£… ngrok**
   - è®¿é—®ï¼šhttps://ngrok.com/
   - æ³¨å†Œè´¦æˆ·å¹¶ä¸‹è½½

2. **å¯åŠ¨æ‚¨çš„åº”ç”¨**
   ```bash
   python run_production.py
   ```

3. **å¼€å¯å†…ç½‘ç©¿é€**
   ```bash
   ngrok http 8000
   ```

4. **èŽ·å–å…¬ç½‘åœ°å€**
   - ngrokä¼šæ˜¾ç¤ºç±»ä¼¼ï¼š`https://abc123.ngrok.io`
   - è¿™å°±æ˜¯æ‚¨çš„å¤–ç½‘è®¿é—®åœ°å€ï¼

### ä½¿ç”¨ frpï¼ˆå…è´¹å¼€æºï¼‰

1. **ä¸‹è½½ frp**
   - GitHubï¼šhttps://github.com/fatedier/frp
   - ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬

2. **é…ç½® frpc.ini**
   ```ini
   [common]
   server_addr = frpæœåŠ¡å™¨åœ°å€
   server_port = 7000
   token = æ‚¨çš„token
   
   [xunshanapp]
   type = http
   local_port = 8000
   custom_domains = æ‚¨çš„åŸŸå
   ```

3. **å¯åŠ¨å®¢æˆ·ç«¯**
   ```bash
   ./frpc -c frpc.ini
   ```

---

## ðŸŒŸ æ–¹æ¡ˆäºŒï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

### é˜¿é‡Œäº‘ECSéƒ¨ç½²

1. **è´­ä¹°æœåŠ¡å™¨**
   - é€‰æ‹©ï¼š1æ ¸2GBå†…å­˜ï¼ˆæœ€ä½Žé…ç½®ï¼‰
   - ç³»ç»Ÿï¼šUbuntu 20.04
   - å¸¦å®½ï¼š1Må³å¯

2. **è¿žæŽ¥æœåŠ¡å™¨**
   ```bash
   ssh root@æ‚¨çš„æœåŠ¡å™¨IP
   ```

3. **çŽ¯å¢ƒå‡†å¤‡**
   ```bash
   # æ›´æ–°ç³»ç»Ÿ
   apt update && apt upgrade -y
   
   # å®‰è£…Python
   apt install python3 python3-pip nginx -y
   
   # å®‰è£…ä¾èµ–
   pip3 install supervisor
   ```

4. **ä¸Šä¼ ä»£ç **
   ```bash
   # æ–¹æ³•1ï¼šä½¿ç”¨scp
   scp -r ./* root@æœåŠ¡å™¨IP:/var/www/xunshanapp/
   
   # æ–¹æ³•2ï¼šä½¿ç”¨git
   git clone æ‚¨çš„ä»£ç ä»“åº“åœ°å€
   ```

5. **å®‰è£…é¡¹ç›®ä¾èµ–**
   ```bash
   cd /var/www/xunshanapp
   pip3 install -r requirements.txt
   ```

6. **é…ç½® Supervisor å®ˆæŠ¤è¿›ç¨‹**
   ```bash
   # åˆ›å»ºé…ç½®æ–‡ä»¶
   nano /etc/supervisor/conf.d/xunshanapp.conf
   ```
   
   å†…å®¹ï¼š
   ```ini
   [program:xunshanapp]
   directory=/var/www/xunshanapp
   command=python3 run_production.py
   autostart=true
   autorestart=true
   user=root
   stdout_logfile=/var/log/xunshanapp.log
   stderr_logfile=/var/log/xunshanapp_error.log
   ```

7. **å¯åŠ¨æœåŠ¡**
   ```bash
   supervisorctl reread
   supervisorctl update
   supervisorctl start xunshanapp
   ```

8. **é…ç½® Nginx åå‘ä»£ç†**
   ```bash
   nano /etc/nginx/sites-available/xunshanapp
   ```
   
   å†…å®¹ï¼š
   ```nginx
   server {
       listen 80;
       server_name æ‚¨çš„åŸŸåæˆ–IP;
       
       location / {
           proxy_pass http://127.0.0.1:8000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       }
   }
   ```

9. **å¯ç”¨é…ç½®å¹¶é‡å¯**
   ```bash
   ln -s /etc/nginx/sites-available/xunshanapp /etc/nginx/sites-enabled/
   nginx -t
   systemctl restart nginx
   ```

10. **é…ç½®åŸŸå**
    - åœ¨åŸŸåç®¡ç†å¤„æ·»åŠ Aè®°å½•æŒ‡å‘æœåŠ¡å™¨IP
    - æˆ–ç›´æŽ¥ä½¿ç”¨IPè®¿é—®

### è…¾è®¯äº‘éƒ¨ç½²

æ­¥éª¤ç±»ä¼¼é˜¿é‡Œäº‘ï¼Œå…·ä½“å‚è€ƒè…¾è®¯äº‘æ–‡æ¡£ã€‚

---

## ðŸ†“ æ–¹æ¡ˆä¸‰ï¼šå…è´¹äº‘å¹³å°éƒ¨ç½²

### Railway éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

1. **å‡†å¤‡ä»£ç **
   - å°†ä»£ç æŽ¨é€åˆ°GitHub
   - ç¡®ä¿æœ‰ `requirements.txt`

2. **è®¿é—® Railway**
   - ç½‘å€ï¼šhttps://railway.app/
   - ä½¿ç”¨GitHubè´¦æˆ·ç™»å½•

3. **éƒ¨ç½²é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹©ä»ŽGitHubå¯¼å…¥
   - é€‰æ‹©æ‚¨çš„ä»£ç ä»“åº“

4. **é…ç½®çŽ¯å¢ƒå˜é‡**
   ```
   FLASK_ENV=production
   PORT=8000
   ```

5. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
   - Railwayä¼šè‡ªåŠ¨éƒ¨ç½²
   - æä¾›å…è´¹åŸŸå

### Heroku éƒ¨ç½²

1. **åˆ›å»º Procfile**
   ```
   web: python run_production.py
   ```

2. **åˆ›å»º runtime.txt**
   ```
   python-3.9.16
   ```

3. **éƒ¨ç½²åˆ° Heroku**
   ```bash
   heroku login
   heroku create æ‚¨çš„åº”ç”¨å
   git push heroku main
   ```

---

## ðŸ”§ å¿«é€Ÿéƒ¨ç½²è„šæœ¬

æˆ‘ä¸ºæ‚¨åˆ›å»ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼š

### äº‘æœåŠ¡å™¨ä¸€é”®éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# è¿è¡Œæ­¤è„šæœ¬å‰ï¼Œè¯·å…ˆå°†ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨

# å®‰è£…ä¾èµ–
apt update
apt install -y python3 python3-pip nginx supervisor

# å®‰è£…PythonåŒ…
pip3 install -r requirements.txt

# é…ç½®supervisor
cat > /etc/supervisor/conf.d/xunshanapp.conf << EOF
[program:xunshanapp]
directory=/var/www/xunshanapp
command=python3 run_production.py
autostart=true
autorestart=true
user=root
stdout_logfile=/var/log/xunshanapp.log
stderr_logfile=/var/log/xunshanapp_error.log
EOF

# å¯åŠ¨åº”ç”¨
supervisorctl reread
supervisorctl update
supervisorctl start xunshanapp

# é…ç½®nginx
cat > /etc/nginx/sites-available/xunshanapp << EOF
server {
    listen 80;
    server_name _;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
        proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
    }
}
EOF

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/xunshanapp /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx

echo "éƒ¨ç½²å®Œæˆï¼è®¿é—®åœ°å€ï¼šhttp://æ‚¨çš„æœåŠ¡å™¨IP"
```

---

## ðŸ’¡ æŽ¨èéƒ¨ç½²æ–¹æ¡ˆ

### ðŸ’° é¢„ç®—è€ƒè™‘

**å¦‚æžœé¢„ç®—æœ‰é™ï¼ˆæŽ¨èï¼‰ï¼š**
1. **Railway** - å®Œå…¨å…è´¹ï¼Œç®€å•æ˜“ç”¨
2. **ngrok** - å¿«é€Ÿæµ‹è¯•ï¼ŒæŒ‰éœ€ä»˜è´¹

**å¦‚æžœéœ€è¦ç¨³å®šæœåŠ¡ï¼š**
1. **é˜¿é‡Œäº‘ECS** - çº¦60å…ƒ/æœˆï¼Œç¨³å®šå¯é 
2. **è…¾è®¯äº‘CVM** - çº¦50å…ƒ/æœˆï¼Œæ€§èƒ½å¥½

### ðŸŽ¯ ä½¿ç”¨åœºæ™¯

**çŸ­æœŸä½¿ç”¨/æµ‹è¯•ï¼š**
- ä½¿ç”¨ ngrok æˆ– Railway

**é•¿æœŸè¿è¥ï¼š**
- äº‘æœåŠ¡å™¨ + åŸŸå

**ä¼ä¸šçº§åº”ç”¨ï¼š**
- äº‘æœåŠ¡å™¨ + CDN + SSLè¯ä¹¦

---

## ðŸ”’ å®‰å…¨é…ç½®

### äº‘æœåŠ¡å™¨å®‰å…¨

1. **ä¿®æ”¹SSHç«¯å£**
   ```bash
   nano /etc/ssh/sshd_config
   # ä¿®æ”¹Port 22ä¸ºå…¶ä»–ç«¯å£
   ```

2. **é…ç½®é˜²ç«å¢™**
   ```bash
   ufw enable
   ufw allow 80
   ufw allow 443
   ufw allow æ‚¨çš„SSHç«¯å£
   ```

3. **SSLè¯ä¹¦é…ç½®**
   ```bash
   # ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦
   certbot --nginx -d æ‚¨çš„åŸŸå
   ```

### åº”ç”¨å®‰å…¨

1. **ä¿®æ”¹é»˜è®¤å¯†ç **
2. **é…ç½®å¼ºå¯†é’¥**
3. **å®šæœŸæ•°æ®å¤‡ä»½**

---

## ðŸ“ž éƒ¨ç½²æ”¯æŒ

### éœ€è¦å¸®åŠ©ï¼Ÿ

1. **æŠ€æœ¯æ”¯æŒ**ï¼šæä¾›è¿œç¨‹ååŠ©
2. **ä»£ç†éƒ¨ç½²**ï¼šå¯æä¾›éƒ¨ç½²æœåŠ¡
3. **ç»´æŠ¤æœåŠ¡**ï¼šå®šæœŸæ›´æ–°ç»´æŠ¤

### å¸¸è§é—®é¢˜

1. **åŸŸåè§£æž**ï¼šç¡®ä¿Aè®°å½•æ­£ç¡®æŒ‡å‘æœåŠ¡å™¨IP
2. **é˜²ç«å¢™**ï¼šå¼€æ”¾80ã€443ç«¯å£
3. **SSLè¯ä¹¦**ï¼šä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦

---

## ðŸŽ‰ éƒ¨ç½²å®ŒæˆåŽ

æ‚¨å°†èŽ·å¾—ï¼š
- 24/7åœ¨çº¿è®¿é—®
- ç‹¬ç«‹çš„ç½‘é¡µåœ°å€
- ç¨³å®šçš„æœåŠ¡
- ä¸“ä¸šçš„å½¢è±¡

**å¤–ç½‘åœ°å€ç¤ºä¾‹ï¼š**
- `https://xunshanapp.æ‚¨çš„åŸŸå.com`
- `https://æ‚¨çš„åº”ç”¨å.railway.app`
- `https://abc123.ngrok.io`

ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æŽ¥è®¿é—®æ‚¨çš„è‡ªä¹ å®¤ç®¡ç†ç³»ç»Ÿï¼ 